@import 'tailwindcss';

/* Configure dark mode to use data-theme attribute */
@custom-variant dark (&:where([data-theme=dark], [data-theme=dark] *));

/* Configure density modifier to use data-density attribute */
@custom-variant compact (&:where([data-density=compact], [data-density=compact] *));

/* Configure Tailwind spacing scale and colors to use our design tokens */
@theme {
  /* ========================================
   * Spacing Scale - Default
   * ======================================== */
  --spacing-0: 0;
  --spacing-1: 0.25rem; /* 4px */
  --spacing-2: 0.5rem; /* 8px */
  --spacing-3: 0.75rem; /* 12px */
  --spacing-4: 1rem; /* 16px */
  --spacing-5: 1.25rem; /* 20px */
  --spacing-6: 1.5rem; /* 24px */
  --spacing-8: 2rem; /* 32px */
  --spacing-10: 2.5rem; /* 40px */
  --spacing-12: 3rem; /* 48px */
  --spacing-16: 4rem; /* 64px */
  --spacing-20: 5rem; /* 80px */
  --spacing-24: 6rem; /* 96px */

  /* ========================================
   * Colors - Primary Group
   * ======================================== */
  --color-primary: hsl(220 91% 54%);
  --color-primary-foreground: hsl(0 0% 100%);
  --color-primary-hover: hsl(220 91% 45%);
  --color-primary-focus: hsl(220 91% 54%);
  --color-primary-active: hsl(220 91% 40%);
  --color-primary-disabled: hsl(220 14% 76%);

  /* ========================================
   * Colors - Secondary Group
   * ======================================== */
  --color-secondary: hsl(220 14% 96%);
  --color-secondary-foreground: hsl(220 9% 46%);
  --color-secondary-hover: hsl(220 14% 90%);
  --color-secondary-focus: hsl(220 14% 96%);

  /* ========================================
   * Colors - Ternary Group
   * ======================================== */
  --color-ternary: hsl(220 14% 92%);
  --color-ternary-foreground: hsl(220 9% 50%);

  /* ========================================
   * Colors - Highlight Group
   * ======================================== */
  --color-highlight: hsl(220 91% 54%);
  --color-highlight-foreground: hsl(0 0% 100%);

  /* ========================================
   * Colors - Success Group
   * ======================================== */
  --color-success: hsl(142 76% 36%);
  --color-success-foreground: hsl(0 0% 100%);
  --color-success-hover: hsl(142 76% 27%);
  --color-success-focus: hsl(142 76% 36%);

  /* ========================================
   * Colors - Error Group
   * ======================================== */
  --color-error: hsl(0 84% 60%);
  --color-error-foreground: hsl(0 0% 100%);
  --color-error-hover: hsl(0 84% 45%);
  --color-error-focus: hsl(0 84% 60%);

  /* Destructive alias (backward compatibility) */
  --color-destructive: var(--color-error);
  --color-destructive-foreground: var(--color-error-foreground);

  /* ========================================
   * Colors - Warning Group
   * ======================================== */
  --color-warning: hsl(38 92% 50%);
  --color-warning-foreground: hsl(0 0% 100%);
  --color-warning-hover: hsl(38 92% 40%);
  --color-warning-focus: hsl(38 92% 50%);

  /* ========================================
   * Colors - Info Group
   * ======================================== */
  --color-info: hsl(217 91% 60%);
  --color-info-foreground: hsl(0 0% 100%);
  --color-info-hover: hsl(217 91% 50%);
  --color-info-focus: hsl(217 91% 60%);

  /* ========================================
   * Colors - Status Group
   * ======================================== */
  --color-status-todo: hsl(220 9% 46%);
  --color-status-todo-bg: hsl(220 9% 46% / 0.2);
  --color-status-todo-border: hsl(220 9% 46% / 0.3);

  --color-status-in-progress: hsl(220 91% 54%);
  --color-status-in-progress-bg: hsl(220 91% 54% / 0.2);
  --color-status-in-progress-border: hsl(220 91% 54% / 0.3);

  --color-status-done: hsl(142 76% 36%);
  --color-status-done-bg: hsl(142 76% 36% / 0.2);
  --color-status-done-border: hsl(142 76% 36% / 0.3);

  --color-status-cancelled: hsl(0 84% 60%);
  --color-status-cancelled-bg: hsl(0 84% 60% / 0.2);
  --color-status-cancelled-border: hsl(0 84% 60% / 0.3);

  /* ========================================
   * Colors - Background & Surface
   * ======================================== */
  --color-background: hsl(0 0% 100%);
  --color-foreground: hsl(224 71% 4%);
  --color-overlay: hsl(0 0% 0% / 0.5);
  --color-card: hsl(0 0% 100%);
  --color-card-foreground: hsl(224 71% 4%);
  --color-popover: hsl(0 0% 100%);
  --color-popover-foreground: hsl(224 71% 4%);

  /* ========================================
   * Colors - Navigation (replaces sidebar-*)
   * ======================================== */
  --color-navigation: hsl(220 14% 98%);
  --color-navigation-foreground: hsl(220 9% 46%);
  --color-navigation-accent: hsl(220 14% 96%);
  --color-navigation-accent-foreground: hsl(224 71% 4%);
  --color-navigation-border: hsl(220 13% 91%);

  /* ========================================
   * Colors - Border & Input
   * ======================================== */
  --color-border: hsl(220 13% 91%);
  --color-input: hsl(220 13% 91%);
  --color-ring: hsl(220 91% 54%);

  /* ========================================
   * Colors - Muted & Accent
   * ======================================== */
  --color-muted: hsl(220 14% 96%);
  --color-muted-foreground: hsl(220 9% 46%);
  --color-accent: hsl(220 14% 96%);
  --color-accent-foreground: hsl(224 71% 4%);

  /* ========================================
   * Typography - Font Families
   * ======================================== */
  --font-sans: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  --font-mono: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, monospace;

  /* ========================================
   * Typography - Font Sizes (Default)
   * ======================================== */
  --text-xs: 0.75rem; /* 12px */
  --text-sm: 0.875rem; /* 14px */
  --text-base: 1rem; /* 16px */
  --text-lg: 1.125rem; /* 18px */
  --text-xl: 1.25rem; /* 20px */
  --text-2xl: 1.5rem; /* 24px */
  --text-3xl: 1.875rem; /* 30px */
  --text-4xl: 2.25rem; /* 36px */

  /* ========================================
   * Typography - Line Heights (Default)
   * ======================================== */
  --line-height-tight: 1rem;
  --line-height-base: 1.25rem;
  --line-height-relaxed: 1.5rem;
  --line-height-loose: 1.75rem;

  /* ========================================
   * Border Radius (Default)
   * ======================================== */
  --radius: 0.5rem; /* 8px */
  --radius-sm: 0.375rem; /* 6px */
  --radius-md: 0.5rem; /* 8px */
  --radius-lg: 0.625rem; /* 10px */
  --radius-xl: 0.75rem; /* 12px */
  --radius-2xl: 1rem; /* 16px */
  --radius-full: 9999px;

  /* ========================================
   * Box Shadows
   * ======================================== */
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
  --shadow-2xl: 0 25px 50px -12px rgb(0 0 0 / 0.25);
}

/* ========================================
 * Design Tokens - Pages Brand Colors
 * Mixed design approach: Notion layout + Jira/Confluence header toolbar
 * Using Tailwind CSS 4 CSS custom properties approach
 * Supports light and dark themes
 * ======================================== */

:root {
  /* Theme toggle - use [data-theme="dark"] for dark mode */
  color-scheme: light dark;

  /* ========================================
   * Transitions - Smooth, Subtle
   * These are not Tailwind utilities, just CSS variables for custom CSS
   * ======================================== */
  --transition-fast: 150ms ease-in-out;
  --transition-base: 200ms ease-in-out;
  --transition-slow: 300ms ease-in-out;
}

/* ========================================
 * Dark Theme Overrides
 * Semantic HSL tokens for dark mode
 * ======================================== */

[data-theme='dark'],
.dark {
  /* Background tokens - dark mode */
  --color-background: hsl(224 71% 4%);
  --color-foreground: hsl(220 14% 96%);

  /* Surface tokens - dark mode */
  --color-card: hsl(224 47% 8%);
  --color-card-foreground: hsl(220 14% 96%);

  --color-popover: hsl(224 47% 8%);
  --color-popover-foreground: hsl(220 14% 96%);

  /* Primary stays the same in dark mode */
  --color-primary: hsl(220 91% 54%);
  --color-primary-foreground: hsl(0 0% 100%);
  --color-primary-hover: hsl(220 91% 64%);
  --color-primary-focus: hsl(220 91% 54%);
  --color-primary-active: hsl(220 91% 50%);
  --color-primary-disabled: hsl(220 14% 76%);

  /* Secondary/muted - dark mode */
  --color-secondary: hsl(224 47% 12%);
  --color-secondary-foreground: hsl(220 14% 76%);
  --color-secondary-hover: hsl(224 47% 16%);
  --color-secondary-focus: hsl(224 47% 12%);

  --color-ternary: hsl(224 47% 10%);
  --color-ternary-foreground: hsl(220 9% 60%);

  --color-highlight: hsl(220 91% 54%);
  --color-highlight-foreground: hsl(0 0% 100%);

  /* State colors - dark mode */
  --color-error: hsl(0 62% 50%);
  --color-error-foreground: hsl(0 0% 100%);
  --color-error-hover: hsl(0 62% 60%);
  --color-error-focus: hsl(0 62% 50%);

  /* Destructive alias (backward compatibility) */
  --color-destructive: var(--color-error);
  --color-destructive-foreground: var(--color-error-foreground);

  --color-success: hsl(142 76% 36%);
  --color-success-foreground: hsl(0 0% 100%);
  --color-success-hover: hsl(142 76% 46%);
  --color-success-focus: hsl(142 76% 36%);

  --color-warning: hsl(38 92% 50%);
  --color-warning-foreground: hsl(0 0% 100%);
  --color-warning-hover: hsl(38 92% 60%);
  --color-warning-focus: hsl(38 92% 50%);

  --color-info: hsl(217 91% 70%);
  --color-info-foreground: hsl(0 0% 100%);
  --color-info-hover: hsl(217 91% 80%);
  --color-info-focus: hsl(217 91% 70%);

  /* Status colors - dark mode */
  --color-status-todo: hsl(220 9% 56%);
  --color-status-todo-bg: hsl(220 9% 56% / 0.2);
  --color-status-todo-border: hsl(220 9% 56% / 0.3);

  --color-status-in-progress: hsl(220 91% 64%);
  --color-status-in-progress-bg: hsl(220 91% 64% / 0.2);
  --color-status-in-progress-border: hsl(220 91% 64% / 0.3);

  --color-status-done: hsl(142 76% 46%);
  --color-status-done-bg: hsl(142 76% 46% / 0.2);
  --color-status-done-border: hsl(142 76% 46% / 0.3);

  --color-status-cancelled: hsl(0 62% 60%);
  --color-status-cancelled-bg: hsl(0 62% 60% / 0.2);
  --color-status-cancelled-border: hsl(0 62% 60% / 0.3);

  /* Border and input - dark mode */
  --color-border: hsl(224 47% 16%);
  --color-input: hsl(224 47% 16%);
  --color-ring: hsl(220 91% 54%);

  /* Navigation tokens - dark mode */
  --color-navigation: hsl(224 47% 6%);
  --color-navigation-foreground: hsl(220 9% 56%);
  --color-navigation-accent: hsl(224 47% 12%);
  --color-navigation-accent-foreground: hsl(220 14% 96%);
  --color-navigation-border: hsl(224 47% 16%);

  /* Muted & Accent - dark mode */
  --color-muted: hsl(224 47% 12%);
  --color-muted-foreground: hsl(220 9% 56%);
  --color-accent: hsl(224 47% 12%);
  --color-accent-foreground: hsl(220 14% 96%);

  /* Dark mode shadows */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -2px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -4px rgba(0, 0, 0, 0.3);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.4), 0 8px 10px -6px rgba(0, 0, 0, 0.3);
  --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
}

/* ========================================
 * Compact Mode Overrides
 * Reduced dimensions for compact UI
 * ======================================== */

[data-density='compact'] {
  /* Compact spacing (reduce by ~20-25%) */
  --spacing-1: 0.1875rem; /* 3px */
  --spacing-2: 0.375rem; /* 6px */
  --spacing-3: 0.5625rem; /* 9px */
  --spacing-4: 0.75rem; /* 12px */
  --spacing-5: 1rem; /* 16px */
  --spacing-6: 1.25rem; /* 20px */
  --spacing-8: 1.5rem; /* 24px */
  --spacing-10: 2rem; /* 32px */
  --spacing-12: 2.5rem; /* 40px */
  --spacing-16: 3rem; /* 48px */
  --spacing-20: 4rem; /* 64px */
  --spacing-24: 5rem; /* 80px */

  /* Compact typography (reduce by ~10-15%) */
  --text-xs: 0.6875rem; /* 11px */
  --text-sm: 0.8125rem; /* 13px */
  --text-base: 0.9375rem; /* 15px */
  --text-lg: 1rem; /* 16px */
  --text-xl: 1.125rem; /* 18px */
  --text-2xl: 1.375rem; /* 22px */
  --text-3xl: 1.75rem; /* 28px */
  --text-4xl: 2rem; /* 32px */

  /* Compact line heights */
  --line-height-tight: 0.875rem;
  --line-height-base: 1.125rem;
  --line-height-relaxed: 1.375rem;
  --line-height-loose: 1.5rem;

  /* Compact border radius (reduce by ~15-20%) */
  --radius: 0.4375rem; /* 7px */
  --radius-sm: 0.3125rem; /* 5px */
  --radius-md: 0.4375rem; /* 7px */
  --radius-lg: 0.5625rem; /* 9px */
  --radius-xl: 0.625rem; /* 10px */
  --radius-2xl: 0.875rem; /* 14px */
}

/* ========================================
 * Global Styles - Text-based App Optimizations
 * ======================================== */

/* Base text styles - Pages design */
body {
  @apply text-foreground;
  @apply bg-background;
  @apply font-sans;
  @apply text-base/(--line-height-base);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  transition:
    background-color var(--transition-base),
    color var(--transition-base),
    font-size var(--transition-base);
}

/* Ensure text elements inherit base font-size from body */
/* This allows compact mode to affect all text that doesn't explicitly set a size */
p,
span,
div,
a,
button,
input,
textarea,
select,
label,
li,
td,
th,
article,
section,
aside,
nav,
header,
footer,
main {
  font-size: inherit;
}

/* Headings use CSS variables for their sizes (affected by compact mode) */
h1 {
  @apply text-4xl/(--line-height-tight);
}

h2 {
  @apply text-3xl/(--line-height-tight);
}

h3 {
  @apply text-2xl/(--line-height-base);
}

h4 {
  @apply text-xl/(--line-height-base);
}

h5 {
  @apply text-lg/(--line-height-base);
}

h6 {
  @apply text-base/(--line-height-base);
}

/* Selection color */
::selection {
  @apply bg-primary/20;
  @apply text-foreground;
}

/* Focus styles */
:focus-visible {
  @apply outline-2;
  @apply outline-ring;
  outline-offset: 2px;
}

/* CDK Overlay Toast Panel Classes */
.lib-toast-panel {
  pointer-events: none;
  z-index: 1000;
}

/* CDK Overlay Modal Panel Size Classes */
.cdk-overlay-pane.lib-modal-panel--sm,
.cdk-overlay-pane.lib-modal-panel--md,
.cdk-overlay-pane.lib-modal-panel--lg {
  display: flex !important;
  align-items: center;
  justify-content: center;
  max-width: 100vw;
  max-height: 100vh;
  padding: 1rem;
  box-sizing: border-box;
  min-height: 0;
}

.lib-toast-panel > * {
  pointer-events: auto;
}

/* Position-specific margins */
.lib-toast-panel--top-right {
  top: 1rem !important;
  right: 1rem !important;
  left: auto !important;
  bottom: auto !important;
}

.lib-toast-panel--top-left {
  top: 1rem !important;
  left: 1rem !important;
  right: auto !important;
  bottom: auto !important;
}

.lib-toast-panel--bottom-right {
  bottom: 1rem !important;
  right: 1rem !important;
  top: auto !important;
  left: auto !important;
}

.lib-toast-panel--bottom-left {
  bottom: 1rem !important;
  left: 1rem !important;
  top: auto !important;
  right: auto !important;
}

.lib-toast-panel--top-center {
  top: 1rem !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  right: auto !important;
  bottom: auto !important;
}

.lib-toast-panel--bottom-center {
  bottom: 1rem !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  top: auto !important;
  right: auto !important;
}

.lib-modal-panel--sm {
  max-width: calc(24rem + 2rem);
  /* 384px + padding */
}

.lib-modal-panel--md {
  max-width: calc(32rem + 2rem);
  /* 512px + padding */
}

.lib-modal-panel--lg {
  max-width: calc(48rem + 2rem);
  /* 768px + padding */
}

.lib-modal-panel--sm .modal-container,
.lib-modal-panel--md .modal-container,
.lib-modal-panel--lg .modal-container {
  width: 100%;
}

/* CDK Overlay Dark Backdrop */
.cdk-overlay-dark-backdrop {
  @apply bg-background/80;
  backdrop-filter: blur(4px);
}

/* ========================================
 * Dropdown Panel Styling
 * ======================================== */
.lib-dropdown-panel {
  @apply rounded-lg;
  @apply shadow-lg;
  @apply border;
  @apply bg-card;
  @apply border-border;
  padding: 0.25rem;
  min-width: 12rem;
  max-width: 20rem;
}

.lib-dropdown-panel--fit-content {
  width: fit-content;
  min-width: auto;
  max-width: none;
}

/* ========================================
 * Typeahead Menu Panel Styling
 * ======================================== */
.te-typeahead-menu-panel {
  @apply rounded-lg;
  @apply shadow-lg;
  @apply border;
  @apply bg-card;
  @apply border-border;
  padding: 0.25rem;
  max-height: 20rem;
  overflow-y: auto;
}

/* ========================================
 * Select Panel Styling
 * ======================================== */
.cdk-overlay-pane.search-dropdown-overlay {
  @apply max-w-full;
}

.cdk-overlay-pane.notification-dropdown-overlay {
  @apply max-w-full;
}

.cdk-overlay-pane.lib-select-panel {
  max-width: none !important;
}

/* ========================================
 * Custom Scrollbar Styling
 * Smaller scrollbars with theme-aware colors
 * ======================================== */

/* Webkit browsers (Chrome, Safari, Edge) */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--color-border));
  border-radius: 3px;
  transition: background-color var(--transition-base);
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--color-muted-foreground));
}

/* Dark theme scrollbar - Webkit */
[data-theme='dark'] ::-webkit-scrollbar-thumb,
.dark ::-webkit-scrollbar-thumb {
  background: hsl(var(--color-muted-foreground));
}

.pages-scrollbar::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.pages-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

.pages-scrollbar::-webkit-scrollbar-thumb {
  background-color: hsl(var(--color-border));
  border-radius: 4px;
}

.pages-scrollbar::-webkit-scrollbar-thumb:hover {
  background-color: hsl(var(--color-primary));
}

/* Firefox - Apply to all elements */
* {
  scrollbar-width: thin;
  scrollbar-color: hsl(var(--color-border)) transparent;
}

[data-theme='dark'] *,
.dark * {
  scrollbar-color: hsl(var(--color-muted-foreground)) transparent;
}
